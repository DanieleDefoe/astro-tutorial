---
import Main from "@/layouts/main.astro";
import { getCollection } from "astro:content";

const pageTitle = "Tags";

const posts = await getCollection("blog");
const tags = [...new Set(posts.flatMap((post) => post.data.tags))];
---

<Main title={pageTitle}>
  <ul class="flex flex-wrap gap-2">
    {
      tags.map((tag) => (
        <li>
          <a
            class="block rounded-md border border-gray-300 px-2 py-1"
            href={`/tags/${tag}`}
          >
            {tag}
          </a>
        </li>
      ))
    }
  </ul>
</Main>

<script>
  import { prefetch } from "astro:prefetch";

  document.addEventListener("DOMContentLoaded", () => {
    prefetch("/about", {
      ignoreSlowConnection: true,
    });
  });
</script>
